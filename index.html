<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Yesman Bakery - Inversiones</title>
<script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    background:#f4f1ea;
}

header{
    background:#8B4513;
    color:white;
    padding:15px;
    text-align:center;
    font-size:22px;
    font-weight:bold;
}

.container{
    padding:20px;
}

.card{
    background:white;
    padding:20px;
    margin-bottom:15px;
    border-radius:15px;
    box-shadow:0 4px 10px rgba(0,0,0,0.1);
}

button{
    width:100%;
    padding:12px;
    border:none;
    border-radius:10px;
    font-size:16px;
    margin-top:10px;
    cursor:pointer;
}

.deposit-btn{
    background:#27ae60;
    color:white;
}

.withdraw-btn{
    background:#c0392b;
    color:white;
}

#ton-connect{
    margin-bottom:20px;
}

input{
    width:100%;
    padding:10px;
    border-radius:10px;
    border:1px solid #ccc;
    margin-top:10px;
}
</style>
</head>

<body>

<header>Yesman Bakery üçû</header>

<div class="container">

<div id="ton-connect"></div>

<div class="card">
<h3>Depositar TON</h3>
<input type="number" id="amount" placeholder="Cantidad en TON">
<button class="deposit-btn" onclick="deposit()">Depositar</button>
</div>

<div class="card">
<h3>Retirar</h3>
<p>Los retiros se procesan manualmente.</p>
<button class="withdraw-btn" onclick="requestWithdraw()">Solicitar Retiro</button>
</div>

<div class="card">
<h3>Estado</h3>
<p id="status">Wallet no conectada</p>
</div>

</div>

<script>
const receiverAddress = "UQDl39VhMg-Hwa898TA-WHOBgGkGQFvBMftpuDm4yyTCdfZ2";

const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
    manifestUrl: 'https://ton-connect.github.io/demo-dapp-with-react-ui/tonconnect-manifest.json',
    buttonRootId: 'ton-connect'
});

tonConnectUI.onStatusChange(wallet => {
    if(wallet){
        document.getElementById("status").innerText = "Wallet conectada: " + wallet.account.address;
    }else{
        document.getElementById("status").innerText = "Wallet no conectada";
    }
});

async function deposit(){
    const amount = document.getElementById("amount").value;
    if(!amount){
        alert("Ingresa cantidad");
        return;
    }

    const transaction = {
        validUntil: Math.floor(Date.now() / 1000) + 600,
        messages: [
            {
                address: receiverAddress,
                amount: (amount * 1000000000).toString()
            }
        ]
    };

    try{
        await tonConnectUI.sendTransaction(transaction);
        alert("Transacci√≥n enviada correctamente");
    }catch(e){
        alert("Error al enviar transacci√≥n");
    }
}

function requestWithdraw(){
    alert("Solicitud enviada. El retiro ser√° procesado manualmente.");
}
</script>

</body>
</html>
