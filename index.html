<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Yesman Bakery - Planes</title>
<script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>

<style>
body{margin:0;font-family:Arial;background:#f4f1ea;}
header{background:#8B4513;color:white;padding:18px;text-align:center;font-size:22px;font-weight:bold;}
.container{padding:20px;max-width:500px;margin:auto;}
.card{background:white;padding:20px;margin-bottom:20px;border-radius:15px;box-shadow:0 6px 15px rgba(0,0,0,0.08);}
.plan{border:2px solid #eee;padding:15px;border-radius:12px;margin-bottom:15px;}
.plan h4{margin:0;}
button{width:100%;padding:12px;border:none;border-radius:10px;font-size:15px;margin-top:10px;cursor:pointer;font-weight:bold;}
.select-btn{background:#27ae60;color:white;}
.deposit-btn{background:#2980b9;color:white;}
.withdraw-btn{background:#c0392b;color:white;}
.balance{font-size:22px;font-weight:bold;color:#27ae60;}
.history{font-size:13px;max-height:120px;overflow:auto;background:#fafafa;padding:10px;border-radius:8px;}
</style>
</head>

<body>

<header>Yesman Bakery 游</header>

<div class="container">

<div id="ton-connect"></div>

<div class="card">
<h3>Saldo Interno</h3>
<div class="balance" id="balance">0 TON</div>
<p>Plan activo: <span id="activePlan">Ninguno</span></p>
</div>

<div class="card">
<h3>Planes de Inversi칩n</h3>

<div class="plan">
<h4>游볠 Plan Panadero</h4>
<p>M칤nimo 0.1 TON</p>
<p>2% diario</p>
<button class="select-btn" onclick="selectPlan('Panadero',0.02,0.1)">Seleccionar</button>
</div>

<div class="plan">
<h4>游볟 Plan Maestro</h4>
<p>M칤nimo 1 TON</p>
<p>3% diario</p>
<button class="select-btn" onclick="selectPlan('Maestro',0.03,1)">Seleccionar</button>
</div>

<div class="plan">
<h4>游볞 Plan Imperio</h4>
<p>M칤nimo 5 TON</p>
<p>4% diario</p>
<button class="select-btn" onclick="selectPlan('Imperio',0.04,5)">Seleccionar</button>
</div>

</div>

<div class="card">
<h3>Depositar</h3>
<input type="number" id="amount" placeholder="Cantidad en TON">
<button class="deposit-btn" onclick="confirmDeposit()">Confirmar dep칩sito (simulado)</button>
</div>

<div class="card">
<h3>Retiro</h3>
<input type="number" id="withdrawAmount" placeholder="Cantidad a retirar">
<button class="withdraw-btn" onclick="requestWithdraw()">Solicitar retiro</button>
</div>

<div class="card">
<h3>Historial</h3>
<div class="history" id="history"></div>
</div>

</div>

<script>
let balance = parseFloat(localStorage.getItem("balance")) || 0;
let history = JSON.parse(localStorage.getItem("history")) || [];
let activePlan = localStorage.getItem("activePlan") || "Ninguno";
let dailyRate = parseFloat(localStorage.getItem("dailyRate")) || 0;
let minAmount = parseFloat(localStorage.getItem("minAmount")) || 0;

updateUI();

function selectPlan(name, rate, minimum){
    activePlan = name;
    dailyRate = rate;
    minAmount = minimum;
    history.push("Plan seleccionado: " + name);
    saveData();
    updateUI();
}

function confirmDeposit(){
    let amount = parseFloat(document.getElementById("amount").value);
    if(!amount || amount < minAmount){
        alert("Debes invertir m칤nimo " + minAmount + " TON en este plan.");
        return;
    }
    balance += amount;
    history.push("Dep칩sito: +" + amount + " TON");
    saveData();
    updateUI();
}

function requestWithdraw(){
    let amount = parseFloat(document.getElementById("withdrawAmount").value);
    if(!amount || amount > balance){
        alert("Saldo insuficiente");
        return;
    }
    balance -= amount;
    history.push("Retiro solicitado: -" + amount + " TON");
    saveData();
    updateUI();
}

function updateUI(){
    document.getElementById("balance").innerText = balance.toFixed(2) + " TON";
    document.getElementById("history").innerHTML = history.join("<br>");
    document.getElementById("activePlan").innerText = activePlan;
}

function saveData(){
    localStorage.setItem("balance", balance);
    localStorage.setItem("history", JSON.stringify(history));
    localStorage.setItem("activePlan", activePlan);
    localStorage.setItem("dailyRate", dailyRate);
    localStorage.setItem("minAmount", minAmount);
}

// Simulaci칩n de ganancia autom치tica cada 30 segundos
setInterval(()=>{
    if(balance > 0 && dailyRate > 0){
        let profit = balance * dailyRate;
        balance += profit;
        history.push("Ganancia: +" + profit.toFixed(4) + " TON");
        saveData();
        updateUI();
    }
},30000);

</script>

</body>
</html>
