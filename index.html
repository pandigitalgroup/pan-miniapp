<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PAN Capital con Precios Reales</title>
<script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>

<style>
body{margin:0;font-family:Arial;background:#0B0F1A;color:white;}
.container{max-width:440px;margin:auto;padding:15px;}
.card{background:#121826;padding:18px;border-radius:15px;margin-bottom:15px;}
.title{font-size:18px;font-weight:600;margin-bottom:8px;}
.value{font-size:20px;font-weight:700;color:#38bdf8;}
button{width:100%;padding:14px;border:none;border-radius:10px;margin:8px 0;font-weight:600;cursor:pointer;}
.blue{background:#3B82F6;color:white;}
.green{background:#22C55E;color:white;}
.red{background:#DC2626;color:white;}
.input{width:100%;padding:12px;border-radius:10px;border:none;background:#1E293B;color:white;}
.footer{font-size:12px;text-align:center;color:#64748B;margin-top:15px;}
</style>
</head>

<body>

<div class="container">

<div class="card">
<div class="title">ğŸ”— ConexiÃ³n Wallet</div>
<div id="walletText">Wallet no conectada</div>
<button class="blue" id="connectWallet">Conectar Wallet</button>
</div>

<div class="card">
<div class="title">ğŸ“Š Precios en Tiempo Real</div>
<div>TON â†’ USDT: <span class="value" id="priceTonUsdt">â€“</span></div>
<div>TON â†’ USD: <span class="value" id="priceTonUsd">â€“</span></div>
<div>TON â†’ COP: <span class="value" id="priceTonCop">â€“</span></div>
<div>USDT â†’ COP: <span class="value" id="priceUsdtCop">â€“</span></div>
</div>

<div class="card">
<div class="title">ğŸ“ˆ Balance Actual</div>
<div>Balance TON: <span id="ton">0</span></div>
<div>Balance PAN: <span id="pan">0</span></div>
</div>

<div class="card">
<input type="number" id="amount" class="input" placeholder="Monto en TON">
<button class="blue" onclick="deposit()">ğŸ’° Depositar TON</button>
<button class="green" onclick="activate()">ğŸš€ Activar Plan</button>
<button class="green" onclick="reinvest()">ğŸ” Reinvertir</button>
<button class="red" onclick="withdraw()">ğŸ”´ Retirar</button>
</div>

<div class="footer">
PAN Capital Â© 2026 â€” Datos de precios por CoinGecko
</div>

</div>

<script>

// ğŸŒ API de precios gratis (CoinGecko)
async function loadPrices(){
    try {
        const res = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=toncoin,tether&vs_currencies=usd,cop,usdt");
        const json = await res.json();

        const tonUsd = json.toncoin.usd;
        const tonCop = json.toncoin.cop;
        const tonUsdt = json.toncoin.usdt;
        const usdtCop = json.tether.cop;

        document.getElementById("priceTonUsd").innerText = tonUsd.toFixed(4) + " $";
        document.getElementById("priceTonCop").innerText = tonCop.toFixed(0) + " COP";
        document.getElementById("priceTonUsdt").innerText = tonUsdt.toFixed(4) + " USDT";
        document.getElementById("priceUsdtCop").innerText = usdtCop.toFixed(0) + " COP";
    } catch (err){
        console.error("Error al cargar precios", err);
    }
}

// Llamar al cargar
loadPrices();
// Actualizar cada 30 segundos
setInterval(loadPrices, 30000);

const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
manifestUrl:'https://ton-connect.github.io/demo-dapp-with-react-ui/tonconnect-manifest.json',
buttonRootId:'connectWallet'
});

tonConnectUI.onStatusChange(wallet=>{
    if(wallet){
        document.getElementById("walletText").innerText = wallet.account.address;
    }
});

let tonBalance = 0;
let panBalance = 0;

function updateUI(){
    document.getElementById("ton").innerText = tonBalance.toFixed(2);
    document.getElementById("pan").innerText = panBalance.toFixed(2);
}

function deposit(){
    const amount = parseFloat(document.getElementById("amount").value);
    if(amount > 0){
        tonBalance += amount;
        updateUI();
        alert("DepÃ³sito simulado TON: " + amount);
    }
}

function activate(){
    if(tonBalance > 0){
        panBalance += tonBalance * 0.02;
        updateUI();
        alert("Plan activado - Ganancia simulada en PAN");
    }
}

function reinvest(){
    if(panBalance > 0){
        tonBalance += panBalance;
        panBalance = 0;
        updateUI();
        alert("ReinversiÃ³n completada");
    }
}

function withdraw(){
    const amount = parseFloat(prompt("Monto a retirar en TON"));
    if(amount > 0 && amount <= tonBalance){
        tonBalance -= amount;
        updateUI();
        alert("Retiro solicitado (simulado)");
    }
}

</script>

</body>
</html>
