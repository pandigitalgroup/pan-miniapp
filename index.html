<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini App Inversi贸n</title>

<script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>

<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    background:#f4f6f9;
}

.container{
    max-width:500px;
    margin:auto;
    padding:15px;
}

h2{
    text-align:center;
}

.grid{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:15px;
    margin-top:20px;
}

.card{
    background:white;
    border-radius:18px;
    padding:20px;
    text-align:center;
    box-shadow:0 4px 10px rgba(0,0,0,0.08);
    cursor:pointer;
    transition:0.2s;
}

.card:hover{
    transform:scale(1.03);
}

.icon{
    font-size:40px;
    margin-bottom:10px;
}

.full{
    grid-column: span 2;
}

.balance-box{
    background:white;
    padding:15px;
    border-radius:15px;
    text-align:center;
    margin-top:10px;
    font-size:18px;
    font-weight:bold;
}

.hidden{
    display:none;
}

input{
    width:100%;
    padding:10px;
    margin-top:10px;
    border-radius:8px;
    border:1px solid #ccc;
}

button{
    width:100%;
    padding:10px;
    margin-top:10px;
    border:none;
    border-radius:8px;
    background:#0088cc;
    color:white;
    font-weight:bold;
}
</style>
</head>
<body>

<div class="container">

<h2>Panel de Inversi贸n</h2>

<div id="ton-connect"></div>

<div class="balance-box">
Saldo: <span id="balance">0</span> TON
</div>

<div class="grid">

<div class="card" onclick="connectWallet()">
<div class="icon"></div>
Conectar Wallet
</div>

<div class="card" onclick="showDeposit()">
<div class="icon"></div>
Depositar
</div>

<div class="card" onclick="showPlans()">
<div class="icon"></div>
Planes
</div>

<div class="card" onclick="showWithdraw()">
<div class="icon"></div>
Retirar
</div>

<div class="card" onclick="showHistory()">
<div class="icon"></div>
Historial
</div>

<div class="card full" onclick="showSupport()">
<div class="icon"></div>
Soporte
</div>

</div>

<!-- SECCIONES DINMICAS -->

<div id="depositSection" class="hidden">
<h3>Depositar TON</h3>
<input type="number" id="depositAmount" placeholder="Cantidad en TON">
<button onclick="deposit()">Enviar Dep贸sito</button>
</div>

<div id="withdrawSection" class="hidden">
<h3>Retirar TON</h3>
<input type="number" id="withdrawAmount" placeholder="Cantidad a retirar">
<button onclick="withdraw()">Solicitar Retiro</button>
</div>

<div id="plansSection" class="hidden">
<h3>Planes Disponibles</h3>
<p>Plan B谩sico: 5% mensual</p>
<p>Plan Pro: 8% mensual</p>
<p>Plan Elite: 12% mensual</p>
</div>

<div id="historySection" class="hidden">
<h3>Historial</h3>
<ul id="historyList"></ul>
</div>

<div id="supportSection" class="hidden">
<h3>Soporte</h3>
<p>Contacto Telegram: @MANDON1</p>
</div>

</div>

<script>
const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
    manifestUrl: 'https://your-domain.com/tonconnect-manifest.json',
    buttonRootId: 'ton-connect'
});

let balance = 0;
let history = [];

function updateBalance(){
    document.getElementById("balance").innerText = balance.toFixed(2);
}

function addHistory(text){
    history.push(text);
    const li = document.createElement("li");
    li.innerText = text;
    document.getElementById("historyList").appendChild(li);
}

function connectWallet(){
    tonConnectUI.openModal();
}

function showDeposit(){
    hideAll();
    document.getElementById("depositSection").classList.remove("hidden");
}

function showWithdraw(){
    hideAll();
    document.getElementById("withdrawSection").classList.remove("hidden");
}

function showPlans(){
    hideAll();
    document.getElementById("plansSection").classList.remove("hidden");
}

function showHistory(){
    hideAll();
    document.getElementById("historySection").classList.remove("hidden");
}

function showSupport(){
    hideAll();
    document.getElementById("supportSection").classList.remove("hidden");
}

function hideAll(){
    document.getElementById("depositSection").classList.add("hidden");
    document.getElementById("withdrawSection").classList.add("hidden");
    document.getElementById("plansSection").classList.add("hidden");
    document.getElementById("historySection").classList.add("hidden");
    document.getElementById("supportSection").classList.add("hidden");
}

async function deposit(){
    const amount = parseFloat(document.getElementById("depositAmount").value);
    if(!amount || amount <= 0) return alert("Cantidad inv谩lida");

    const transaction = {
        validUntil: Math.floor(Date.now() / 1000) + 600,
        messages: [
            {
                address: "UQC_bn7pmX48L4cwHyR8xykM_PK34zNXQdQ0cgE6FCwGi59J",
                amount: (amount * 1000000000).toString()
            }
        ]
    };

    await tonConnectUI.sendTransaction(transaction);

    balance += amount;
    updateBalance();
    addHistory("Dep贸sito de " + amount + " TON");
}

function withdraw(){
    const amount = parseFloat(document.getElementById("withdrawAmount").value);
    if(!amount || amount <= 0) return alert("Cantidad inv谩lida");
    if(amount > balance) return alert("Saldo insuficiente");

    balance -= amount;
    updateBalance();
    addHistory("Retiro solicitado de " + amount + " TON");
    alert("Retiro registrado (modo prueba)");
}

updateBalance();
</script>

</body>
</html>
